# テストフォルダ

このフォルダには、テスト仕様書とテスト関連のファイルが格納されています。

## ファイル構成

### TEST_SPECIFICATION.md
包括的なテスト仕様書です。

**主要セクション**:
1. **テスト方針**: テスト目的、範囲、レベル、環境
2. **単体テスト仕様**: 各モジュールの個別テスト（32ケース以上）
3. **結合テスト仕様**: モジュール間の連携テスト（6ケース）
4. **システムテスト仕様**: エンドツーエンドテスト（6ケース）
5. **テストデータ**: 標準テストデータ、エラーケース、境界値
6. **テスト実行手順**: 単体/結合/システムテストの実行方法
7. **テストカバレッジ目標**: 行/分岐/関数カバレッジの目標値
8. **バグ管理**: バグの分類とレポート形式
9. **テストスケジュール**: テストフェーズと実施タイミング
10. **テスト環境のセットアップ**: 必要なツールとセットアップ手順

## テスト環境

- **フレームワーク**: Vitest（未実装、今後追加予定）
- **実行環境**: Node.js
- **ブラウザテスト**: Playwright（将来実装）

## 仕様差分が発生しやすい箇所（重点）

- 前年所得の入力方法（必須選択、fromSave時の保存選択必須）
- 住民税の課税所得（生命保険料控除・地震保険料控除は住民税用控除額を使用、内訳表示）
- 生命保険料控除（所得税/住民税で計算式・上限が異なる、統合「生命保険料控除（合計）」行は表示しない）
- 数値入力で0が入力できること（0が空扱いにならない）

## テストケース数

- **単体テスト**: 32ケース以上
- **結合テスト**: 6ケース
- **システムテスト**: 6ケース
- **合計**: 44ケース以上

## テストカバレッジ目標

- **行カバレッジ**: 80%以上
- **分岐カバレッジ**: 75%以上
- **関数カバレッジ**: 85%以上

### 優先度別カバレッジ

- **高優先度**: 計算エンジン（`engine.ts`）→ 90%以上
- **中優先度**: バリデーション（`validation.ts`）→ 85%以上
- **低優先度**: UI（`App.tsx`）→ 70%以上

## テスト実行

### セットアップ

```bash
# テスト用の依存関係のインストール
npm install -D vitest @vitest/ui @testing-library/react @testing-library/jest-dom
```

### 実行コマンド

```bash
# 単体テストの実行
npm run test

# カバレッジ付きで実行
npm run test:coverage

# ウォッチモードで実行
npm run test:watch
```

## テストデータ

テスト仕様書に記載されているテストデータ（TD-001～TD-006）を使用してください。

## 参考資料

- 要件定義書: `../design/REQUIREMENTS.md`
- 基本設計書: `../design/BASIC_DESIGN.md`
- 詳細設計書: `../design/DETAILED_DESIGN.md`
- ソースコード: `../src/`

